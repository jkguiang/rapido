<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>RAPIDO: RAPIDO</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RAPIDO
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">RAPIDO </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><em>Repeatable Analysis Programming for Interpretability, Durability, and Organization</em></p>
<p>RAPIDO is a C++ framework designed to make writing HEP analyses more ergonomic and readable. It wraps some basic functionality of <a href="https://root.cern/">ROOT</a>. The idea is that an analysis, in general, consists of a few objects: a TTree (to hold some skimmed N-Tuple and/or a set of histograms), a cutflow (a collection of boolean logic for filtering events), and a looper (some way to run over multiple files). RAPIDO is designed to handle all three of these tasks such that every analysis that uses it is structured in the same way. In addition, the <em>way</em> in which it is structured lends itself to the common workflow of a HEPEx-er.</p>
<h2>RAPIDO Tools</h2>
<ol type="1">
<li><a class="el" href="classArbol.html">Arbol</a>: TTree wrapper that reduces the hassle of setting up and using TTrees</li>
<li><a class="el" href="classCutflow.html">Cutflow</a>: Binary search tree with lambda nodes and other bells and whistles</li>
<li><a class="el" href="classLooper.html">Looper</a>: Basic looper for a TChain of TFiles that uses any selector</li>
</ol>
<h2>Set Up Instructions</h2>
<ol type="1">
<li>Clone this repository</li>
<li><code>cd</code> into the cloned repository and run <code>make -j5</code></li>
<li>Write your script and <code>#include</code> whatever you need</li>
<li>Compile and run using your favorite <code>Makefile</code></li>
</ol>
<h2>Examples</h2>
<ol type="1">
<li>A simple <a class="el" href="classArbol.html">Arbol</a> example (using <a href="https://github.com/cmstas/NanoTools">NanoCORE</a> to read NanoAOD) <div class="fragment"><div class="line"><span class="comment">// NanoCORE</span></div><div class="line"><span class="preprocessor">#include &quot;Nano.h&quot;</span></div><div class="line"><span class="comment">// RAPIDO</span></div><div class="line"><span class="preprocessor">#include &quot;arbol.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;looper.h&quot;</span></div><div class="line"></div><div class="line"><span class="comment">// Initialize Arbol</span></div><div class="line">TFile* output_tfile = <span class="keyword">new</span> Tfile(<span class="stringliteral">&quot;output.root&quot;</span>, <span class="stringliteral">&quot;RECREATE&quot;</span>);</div><div class="line"><a class="code" href="classArbol.html">Arbol</a> arbol = <a class="code" href="classArbol.html">Arbol</a>(output_tfile);</div><div class="line"></div><div class="line"><span class="comment">// Initialize branches</span></div><div class="line">arbol.<a class="code" href="classArbol.html#a552622885ffce15f1b1369fe44e729bb">newBranch</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;event&quot;</span>);</div><div class="line">arbol.<a class="code" href="classArbol.html#a552622885ffce15f1b1369fe44e729bb">newBranch</a>&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;met&quot;</span>);</div><div class="line">arbol.<a class="code" href="classArbol.html#a552622885ffce15f1b1369fe44e729bb">newBranch</a>&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;ht&quot;</span>);</div><div class="line">arbol.<a class="code" href="classArbol.html#a552622885ffce15f1b1369fe44e729bb">newBranch</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;n_jets&quot;</span>);</div><div class="line">arbol.<a class="code" href="classArbol.html#a57b6cf7cca6cbb3b75bb0e0333dbe3c8">newVecBranch</a>&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;good_jet_pt&quot;</span>); <span class="comment">// newVecBranch&lt;float&gt; &lt;--&gt; newBranch&lt;std::vector&lt;float&gt;&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// Get file</span></div><div class="line">TChain* tchain = <span class="keyword">new</span> TChain(<span class="stringliteral">&quot;Events&quot;</span>); </div><div class="line">tchain-&gt;Add(<span class="stringliteral">&quot;root://xcache-redirector.t2.ucsd.edu:2040//store/mc/RunIIAutumn18NanoAODv7/TTJets_DiLept_TuneCP5_13TeV-madgraphMLM-pythia8/NANOAODSIM/Nano02Apr2020_102X_upgrade2018_realistic_v21-v1/60000/69CAC742-7679-D342-BF99-BF22B6D10BA4.root&quot;</span>);</div><div class="line"></div><div class="line"><span class="comment">// Initialize Looper</span></div><div class="line"><a class="code" href="classLooper.html">Looper</a> looper = <a class="code" href="classLooper.html">Looper&lt;Nano&gt;</a>(tchain, &amp;nt); <span class="comment">// nt is a global variable from NanoCORE</span></div><div class="line"></div><div class="line"><span class="comment">// Run</span></div><div class="line">looper.<a class="code" href="classLooper.html#abfa564ca48778da1f58c8a6444ddd463">run</a>(</div><div class="line">    [&amp;]()</div><div class="line">    {</div><div class="line">        <span class="comment">// --&gt; Event-level Logic &lt;--</span></div><div class="line">        <span class="comment">// Reset tree</span></div><div class="line">        arbol.<a class="code" href="classArbol.html#a4c2184d378ab21a9627a57098291a7c4">resetBranches</a>(); <span class="comment">// variables like arbol and nt are captured by reference</span></div><div class="line">        <span class="comment">// Loop over jets</span></div><div class="line">        <span class="keywordtype">float</span> ht = 0.;</div><div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; nt.nJet(); i++) </div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (nt.Jet_pt()[i] &gt; 30)</div><div class="line">            {</div><div class="line">                arbol.<a class="code" href="classArbol.html#a811156c9134ca7e0015bbe2ab95434b0">appendToVecLeaf</a>&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;good_jet_pt&quot;</span>, Jet_pt()[i]);</div><div class="line">                ht += Jet_pt()[i];</div><div class="line">            }</div><div class="line">        }</div><div class="line">        arbol.<a class="code" href="classArbol.html#a7a8d3bec0bf5c00635a0b00fcd63cf01">setLeaf</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;event&quot;</span>, event());</div><div class="line">        arbol.<a class="code" href="classArbol.html#a7a8d3bec0bf5c00635a0b00fcd63cf01">setLeaf</a>&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;ht&quot;</span>, ht);</div><div class="line">        arbol.<a class="code" href="classArbol.html#a7a8d3bec0bf5c00635a0b00fcd63cf01">setLeaf</a>&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;met&quot;</span>, MET_pt());</div><div class="line">        arbol.<a class="code" href="classArbol.html#a7a8d3bec0bf5c00635a0b00fcd63cf01">setLeaf</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;n_jets&quot;</span>, arbol.<a class="code" href="classArbol.html#a634be85d92f5f26403407952b10a29fd">getVecLeaf</a>&lt;<span class="keywordtype">float</span>&gt;(<span class="stringliteral">&quot;goot_jet_pt&quot;</span>).size());</div><div class="line">        arbol.<a class="code" href="classArbol.html#a1d029dd97a0451281c774b578d93bcda">fillTTree</a>();</div><div class="line">        <span class="keywordflow">return</span>; <span class="comment">// Must be void</span></div><div class="line">    }</div><div class="line">);</div><div class="line"></div><div class="line">arbol.<a class="code" href="classArbol.html#ade7d835bbe383a70006e86785ae5672c">writeTFile</a>();</div></div><!-- fragment --> </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
