\label{index_md__Users_jguiang_Projects_rapido_README}%
\Hypertarget{index_md__Users_jguiang_Projects_rapido_README}%
{\itshape Repeatable Analysis Programming for Interpretability, Durability, and Organization}

\href{https://opensource.org/licenses/MIT}{\texttt{ }} \href{https://jkguiang.github.io/rapido/html/index.html}{\texttt{ }} \href{https://www.codefactor.io/repository/github/jkguiang/rapido/overview/master}{\texttt{ }}

RAPIDO is a C++ framework designed to make writing HEP analyses more ergonomic and readable. It wraps some basic functionality of \href{https://root.cern/}{\texttt{ ROOT}}. The idea is that an analysis, in general, consists of a few objects\+: a TTree (to hold some skimmed N-\/\+Tuple and/or a set of histograms), a cutflow (a collection of boolean logic for filtering events), and a looper (some way to run over multiple files). RAPIDO is designed to handle all three of these tasks such that every analysis that uses it is structured in the same way. In addition, the {\itshape way} in which it is structured lends itself to the common workflow of a HEPEx-\/er.\hypertarget{index_autotoc_md1}{}\doxysection{RAPIDO Tools}\label{index_autotoc_md1}

\begin{DoxyEnumerate}
\item \mbox{\hyperlink{classArbol}{Arbol}}\+: TTree wrapper that reduces the hassle of setting up and using TTrees
\item \mbox{\hyperlink{classCutflow}{Cutflow}}\+: Binary search tree with lambda nodes and other bells and whistles
\begin{DoxyItemize}
\item \mbox{\hyperlink{classHistflow}{Histflow}}\+: An extension of the \mbox{\hyperlink{classCutflow}{Cutflow}} object that handles histogramming at any given step of the cutflow
\end{DoxyItemize}
\item \mbox{\hyperlink{classLooper}{Looper}}\+: Basic looper for a TChain of TFiles that uses any selector
\end{DoxyEnumerate}\hypertarget{index_autotoc_md2}{}\doxysection{Set Up Instructions}\label{index_autotoc_md2}

\begin{DoxyEnumerate}
\item Clone this repository
\item {\ttfamily cd} into the cloned repository and run {\ttfamily make -\/j5}
\item Write your script (e.\+g. {\ttfamily main.\+cc}) and {\ttfamily \#include} whatever you need
\item Compile and run using your favorite {\ttfamily Makefile}\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\$ make}
\DoxyCodeLine{\$ export LD\_LIBRARY\_PATH=\$LD\_LIBRARY\_PATH:\$PWD/rapido/src}
\DoxyCodeLine{\$ export ROOT\_INCLUDE\_PATH=\$ROOT\_INCLUDE\_PATH:\$PWD/rapido/src}
\DoxyCodeLine{\$ ./main}

\end{DoxyCode}

\end{DoxyEnumerate}\hypertarget{index_autotoc_md3}{}\doxysection{Examples}\label{index_autotoc_md3}

\begin{DoxyEnumerate}
\item Minimal \mbox{\hyperlink{classCutflow}{Cutflow}} example 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}cutflow.h"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{using} namepsace std;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int} main()}
\DoxyCodeLine{\{}
\DoxyCodeLine{    \mbox{\hyperlink{classCutflow}{Cutflow}} dummy\_cutflow = \mbox{\hyperlink{classCutflow}{Cutflow}}();}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classCut}{Cut}}* dummy\_root = \textcolor{keyword}{new} \mbox{\hyperlink{classCut}{Cut}}(\textcolor{stringliteral}{"{}root"{}}, []() \{ \textcolor{keywordflow}{return} bool(rand() \% 2); \});}
\DoxyCodeLine{    dummy\_cutflow.\mbox{\hyperlink{classCutflow_ad27d37141c3748779a5d81fad919ecbb}{setRoot}}(dummy\_root);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classCut}{Cut}}* node0 = \textcolor{keyword}{new} \mbox{\hyperlink{classCut}{Cut}}(\textcolor{stringliteral}{"{}node0"{}}, []() \{ \textcolor{keywordflow}{return} bool(rand() \% 2); \});}
\DoxyCodeLine{    dummy\_cutflow.\mbox{\hyperlink{classCutflow_a8da46f1053a6b97991489ee0920c29a1}{insert}}(\textcolor{stringliteral}{"{}root"{}}, node0, Left);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classCut}{Cut}}* node1 = \textcolor{keyword}{new} \mbox{\hyperlink{classCut}{Cut}}(\textcolor{stringliteral}{"{}node1"{}}, []() \{ \textcolor{keywordflow}{return} bool(rand() \% 2); \});}
\DoxyCodeLine{    dummy\_cutflow.\mbox{\hyperlink{classCutflow_a8da46f1053a6b97991489ee0920c29a1}{insert}}(\textcolor{stringliteral}{"{}root"{}}, node1, Right);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classCut}{Cut}}* node2 = \textcolor{keyword}{new} \mbox{\hyperlink{classCut}{Cut}}(\textcolor{stringliteral}{"{}node2"{}}, []() \{ \textcolor{keywordflow}{return} bool(rand() \% 2); \});}
\DoxyCodeLine{    dummy\_cutflow.\mbox{\hyperlink{classCutflow_a8da46f1053a6b97991489ee0920c29a1}{insert}}(\textcolor{stringliteral}{"{}node1"{}}, node2, Right);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classCut}{Cut}}* node3 = \textcolor{keyword}{new} \mbox{\hyperlink{classCut}{Cut}}(\textcolor{stringliteral}{"{}node3"{}}, []() \{ \textcolor{keywordflow}{return} bool(rand() \% 2); \});}
\DoxyCodeLine{    dummy\_cutflow.\mbox{\hyperlink{classCutflow_a8da46f1053a6b97991489ee0920c29a1}{insert}}(\textcolor{stringliteral}{"{}node1"{}}, node3, Left);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classCut}{Cut}}* node4 = \textcolor{keyword}{new} \mbox{\hyperlink{classCut}{Cut}}(\textcolor{stringliteral}{"{}node4"{}}, []() \{ \textcolor{keywordflow}{return} bool(rand() \% 2); \});}
\DoxyCodeLine{    dummy\_cutflow.\mbox{\hyperlink{classCutflow_a8da46f1053a6b97991489ee0920c29a1}{insert}}(\textcolor{stringliteral}{"{}node2"{}}, node4, Right);}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 5; i++)}
\DoxyCodeLine{    \{}
\DoxyCodeLine{        \mbox{\hyperlink{classCut}{Cut}}* terminal\_node = dummy\_cutflow.\mbox{\hyperlink{classCutflow_a563da4fc41aa5c611dd0ce37ce966f2c}{run}}();}
\DoxyCodeLine{        cout << \textcolor{stringliteral}{"{}terminated at "{}} << terminal\_node-\/>\mbox{\hyperlink{classCut_accf700d2d00746b97a265d4aea3f55c2}{name}} << endl;}
\DoxyCodeLine{    \}}
\DoxyCodeLine{    dummy\_cutflow.\mbox{\hyperlink{classCutflow_a0cb4c8bd6d15ace1f85fe0cfb8d9d828}{print}}();}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\}}

\end{DoxyCode}

\item A simple Arbol+\+Looper example (using {\ttfamily ROOT\+::\+Make\+Selector} to read an arbitrary ROOT file) 
\begin{DoxyCode}{0}
\DoxyCodeLine{\$ root \# only known to work for ROOT v6.22 and greater}
\DoxyCodeLine{root[0] TFile* f = new TFile("{}/path/to/myfile.root"{})}
\DoxyCodeLine{root[1] TreeName-\/>MakeSelector("{}MySelector"{})}
\DoxyCodeLine{(int) 0}
\DoxyCodeLine{root [2] .q}
\DoxyCodeLine{\$ mv MySelector.C MySelector.cc}
\DoxyCodeLine{\$ rootcint myselectordict.cc -\/c MySelector.h}
\DoxyCodeLine{\$ mv myselectordict* rapdio/}
\DoxyCodeLine{\$ mv MySelector* rapido/}
\DoxyCodeLine{\$ cd rapido/}
\DoxyCodeLine{\$ make clean}
\DoxyCodeLine{\$ make -\/j5}

\end{DoxyCode}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{// Selector}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}MySelector.h"{}}}
\DoxyCodeLine{\textcolor{comment}{// RAPIDO}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}arbol.h"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}looper.h"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int} main()}
\DoxyCodeLine{\{}
\DoxyCodeLine{    \textcolor{comment}{// Initialize Arbol}}
\DoxyCodeLine{    TFile* output\_tfile = \textcolor{keyword}{new} Tfile(\textcolor{stringliteral}{"{}output.root"{}}, \textcolor{stringliteral}{"{}RECREATE"{}});}
\DoxyCodeLine{    \mbox{\hyperlink{classArbol}{Arbol}} arbol = \mbox{\hyperlink{classArbol}{Arbol}}(output\_tfile);}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Initialize branches}}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{int}>(\textcolor{stringliteral}{"{}event"{}});}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}met"{}});}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}ht"{}});}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{int}>(\textcolor{stringliteral}{"{}n\_jets"{}});}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a57b6cf7cca6cbb3b75bb0e0333dbe3c8}{newVecBranch}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}good\_jet\_pt"{}}); \textcolor{comment}{// newVecBranch<float> <-\/-\/> newBranch<std::vector<float>>}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Get file}}
\DoxyCodeLine{    TChain* tchain = \textcolor{keyword}{new} TChain(\textcolor{stringliteral}{"{}TreeName"{}}); }
\DoxyCodeLine{    tchain-\/>Add(\textcolor{stringliteral}{"{}/path/to/myfile.root"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Initialize Looper}}
\DoxyCodeLine{    MySelector selector;}
\DoxyCodeLine{    \mbox{\hyperlink{classLooper}{Looper}} looper = \mbox{\hyperlink{classLooper}{Looper<Nano>}}(\&selector, tchain, \textcolor{stringliteral}{"{}TreeName"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Run}}
\DoxyCodeLine{    looper.\mbox{\hyperlink{classLooper_abfa564ca48778da1f58c8a6444ddd463}{run}}(}
\DoxyCodeLine{        [\&]()}
\DoxyCodeLine{        \{}
\DoxyCodeLine{            \textcolor{comment}{// -\/-\/> Event-\/level Logic <-\/-\/}}
\DoxyCodeLine{            \textcolor{comment}{// Reset tree}}
\DoxyCodeLine{            arbol.\mbox{\hyperlink{classArbol_a4c2184d378ab21a9627a57098291a7c4}{resetBranches}}(); \textcolor{comment}{// variables like arbol and selector are captured by reference}}
\DoxyCodeLine{            \textcolor{comment}{// Loop over jets}}
\DoxyCodeLine{            \textcolor{keywordtype}{float} ht = 0.;}
\DoxyCodeLine{            \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < *selector.nJet; i++) }
\DoxyCodeLine{            \{}
\DoxyCodeLine{                \textcolor{keywordflow}{if} (selector.Jet\_pt[i] > 30)}
\DoxyCodeLine{                \{}
\DoxyCodeLine{                    arbol.appendToVecLeaf<float>(\textcolor{stringliteral}{"{}good\_jet\_pt"{}}, selector.Jet\_pt[i]);}
\DoxyCodeLine{                    ht += selector.Jet\_pt[i];}
\DoxyCodeLine{                \}}
\DoxyCodeLine{            \}}
\DoxyCodeLine{            arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}<\textcolor{keywordtype}{int}>(\textcolor{stringliteral}{"{}event"{}}, *selector.event);}
\DoxyCodeLine{            arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}ht"{}}, ht);}
\DoxyCodeLine{            arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}met"{}}, *selector.MET\_pt);}
\DoxyCodeLine{            arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}<\textcolor{keywordtype}{int}>(\textcolor{stringliteral}{"{}n\_jets"{}}, arbol.\mbox{\hyperlink{classArbol_aefdf6dfa74ceed51b2cb99f45bfebf56}{getVecLeaf}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}goot\_jet\_pt"{}}).size());}
\DoxyCodeLine{            arbol.\mbox{\hyperlink{classArbol_a1d029dd97a0451281c774b578d93bcda}{fillTTree}}();}
\DoxyCodeLine{            \textcolor{keywordflow}{return};}
\DoxyCodeLine{        \}}
\DoxyCodeLine{    );}
\DoxyCodeLine{    \textcolor{comment}{// Write results to a ROOT file}}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_ade7d835bbe383a70006e86785ae5672c}{writeTFile}}();}
\DoxyCodeLine{    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\}}

\end{DoxyCode}

\item Arbol+\+Cutflow+\+Looper+\+HEPCLI example (now using \href{https://github.com/cmstas/NanoTools/tree/master/NanoCORE}{\texttt{ Nano\+CORE}} to read Nano\+AOD) 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{// ROOT}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}TH1F.h"{}}}
\DoxyCodeLine{\textcolor{comment}{// NanoCORE}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}Nano.h"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}tqdm.h"{}} \textcolor{comment}{// progress bar}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}SSSelections.h"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}ElectronSelections.h"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}MuonSelections.h"{}}}
\DoxyCodeLine{\textcolor{comment}{// RAPIDO}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}arbol.h"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}cutflow.h"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}looper.h"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{\textcolor{keyword}{using namespace }tas;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}** argv) }
\DoxyCodeLine{\{}
\DoxyCodeLine{    \textcolor{comment}{// CLI}}
\DoxyCodeLine{    \mbox{\hyperlink{classHEPCLI}{HEPCLI}} cli = \mbox{\hyperlink{classHEPCLI}{HEPCLI}}(argc, argv);}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Initialize Looper}}
\DoxyCodeLine{    \mbox{\hyperlink{classLooper}{Looper}} looper = \mbox{\hyperlink{classLooper}{Looper<Nano>}}(\&nt, cli.\mbox{\hyperlink{classHEPCLI_a3d4bb4a7c1f1b6d4e008ff76e43bef15}{input\_tchain}});}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Initialize Arbol}}
\DoxyCodeLine{    \mbox{\hyperlink{classArbol}{Arbol}} arbol = \mbox{\hyperlink{classArbol}{Arbol}}(cli.\mbox{\hyperlink{classHEPCLI_ab900d2e3822e20d636564874440d33f0}{output\_tfile}});}
\DoxyCodeLine{    \textcolor{comment}{// Event branches}}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{int}>(\textcolor{stringliteral}{"{}event"{}}, -\/999);}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}met"{}}, -\/999);}
\DoxyCodeLine{    \textcolor{comment}{// Leptons}}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{int}>(\textcolor{stringliteral}{"{}leading\_lep\_id"{}}, -\/999);}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}leading\_lep\_pt"{}}, -\/999);}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}leading\_lep\_eta"{}}, -\/999);}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}leading\_lep\_phi"{}}, -\/999);}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{int}>(\textcolor{stringliteral}{"{}trailing\_lep\_id"{}}, -\/999);}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}trailing\_lep\_pt"{}}, -\/999);}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}trailing\_lep\_eta"{}}, -\/999);}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_a552622885ffce15f1b1369fe44e729bb}{newBranch}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}trailing\_lep\_phi"{}}, -\/999);}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Initialize Cutflow}}
\DoxyCodeLine{    \mbox{\hyperlink{classCutflow}{Cutflow}} cutflow = \mbox{\hyperlink{classCutflow}{Cutflow}}();}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Initialize some hists}}
\DoxyCodeLine{    TH1F* ld\_lep\_pt\_hist = \textcolor{keyword}{new} TH1F(\textcolor{stringliteral}{"{}ld\_lep\_pt\_hist"{}}, \textcolor{stringliteral}{"{}ld\_lep\_pt\_hist"{}}, 20, 0, 200);}
\DoxyCodeLine{    TH1F* tr\_lep\_pt\_hist = \textcolor{keyword}{new} TH1F(\textcolor{stringliteral}{"{}tr\_lep\_pt\_hist"{}}, \textcolor{stringliteral}{"{}tr\_lep\_pt\_hist"{}}, 20, 0, 200);}
\DoxyCodeLine{    cutflow.globals.newVar<TH1F>(\textcolor{stringliteral}{"{}ld\_lep\_pt\_hist"{}}, *ld\_lep\_pt\_hist);}
\DoxyCodeLine{    cutflow.globals.newVar<TH1F>(\textcolor{stringliteral}{"{}tr\_lep\_pt\_hist"{}}, *tr\_lep\_pt\_hist);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classCut}{Cut}}* root = \textcolor{keyword}{new} \mbox{\hyperlink{classCut}{Cut}}(}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}Bookkeeping"{}},}
\DoxyCodeLine{        [\&]()}
\DoxyCodeLine{        \{}
\DoxyCodeLine{            arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}(\textcolor{stringliteral}{"{}event"{}}, nt.event());}
\DoxyCodeLine{            arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}(\textcolor{stringliteral}{"{}met"{}}, nt.MET\_pt());}
\DoxyCodeLine{            \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{        \},}
\DoxyCodeLine{        [\&]()}
\DoxyCodeLine{        \{}
\DoxyCodeLine{            \textcolor{comment}{// Dummy weight}}
\DoxyCodeLine{            \textcolor{keywordflow}{return} 0.001;}
\DoxyCodeLine{        \}}
\DoxyCodeLine{    );}
\DoxyCodeLine{    cutflow.setRoot(root);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classCut}{Cut}}* dilep\_presel = \textcolor{keyword}{new} \mbox{\hyperlink{classCut}{Cut}}(}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}DileptonPreselection"{}},}
\DoxyCodeLine{        [\&]()}
\DoxyCodeLine{        \{}
\DoxyCodeLine{            \textcolor{keywordtype}{int} n\_tight\_leps = 0;}
\DoxyCodeLine{            \textcolor{keywordtype}{int} n\_loose\_not\_tight\_leps = 0;}
\DoxyCodeLine{            Leptons leptons = getLeptons();}
\DoxyCodeLine{            Lepton leading\_lep;}
\DoxyCodeLine{            Lepton trailing\_lep;}
\DoxyCodeLine{            \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& lep : leptons)}
\DoxyCodeLine{            \{}
\DoxyCodeLine{                \textcolor{keywordflow}{if} (lep.pt() < 20) \{ \textcolor{keywordflow}{continue}; \}}
\DoxyCodeLine{                \textcolor{keywordflow}{if} (lep.idlevel() == SS::IDtight) }
\DoxyCodeLine{                \{ }
\DoxyCodeLine{                    \textcolor{keywordflow}{if} (lep.pt() > leading\_lep.pt()) }
\DoxyCodeLine{                    \{ }
\DoxyCodeLine{                        trailing\_lep = leading\_lep;}
\DoxyCodeLine{                        leading\_lep = lep; }
\DoxyCodeLine{                    \}}
\DoxyCodeLine{                    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (lep.pt() > trailing\_lep.pt()) \{ trailing\_lep = lep; \}}
\DoxyCodeLine{                    n\_tight\_leps++; }
\DoxyCodeLine{                \}}
\DoxyCodeLine{                \textcolor{keywordflow}{if} (lep.idlevel() == SS::IDfakable) \{ n\_loose\_not\_tight\_leps++; \}}
\DoxyCodeLine{            \}}
\DoxyCodeLine{            \textcolor{keywordflow}{if} (n\_tight\_leps == 2 \&\& n\_loose\_not\_tight\_leps == 0) }
\DoxyCodeLine{            \{}
\DoxyCodeLine{                arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}<\textcolor{keywordtype}{int}>(\textcolor{stringliteral}{"{}leading\_lep\_id"{}}, leading\_lep.id());}
\DoxyCodeLine{                arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}leading\_lep\_pt"{}}, leading\_lep.pt());}
\DoxyCodeLine{                arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}leading\_lep\_eta"{}}, leading\_lep.eta());}
\DoxyCodeLine{                arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}leading\_lep\_phi"{}}, leading\_lep.phi());}
\DoxyCodeLine{                arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}<\textcolor{keywordtype}{int}>(\textcolor{stringliteral}{"{}trailing\_lep\_id"{}}, trailing\_lep.id());}
\DoxyCodeLine{                arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}trailing\_lep\_pt"{}}, trailing\_lep.pt());}
\DoxyCodeLine{                arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}trailing\_lep\_eta"{}}, trailing\_lep.eta());}
\DoxyCodeLine{                arbol.\mbox{\hyperlink{classArbol_a7a8d3bec0bf5c00635a0b00fcd63cf01}{setLeaf}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}trailing\_lep\_phi"{}}, trailing\_lep.phi());}
\DoxyCodeLine{                \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{            \}}
\DoxyCodeLine{            \textcolor{keywordflow}{else} \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}
\DoxyCodeLine{        \}}
\DoxyCodeLine{    );}
\DoxyCodeLine{    cutflow.insert(\textcolor{stringliteral}{"{}Bookkeeping"{}}, dilep\_presel, Right);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classCut}{Cut}}* monolep\_or\_fakes = \textcolor{keyword}{new} \mbox{\hyperlink{classCut}{Cut}}(\textcolor{stringliteral}{"{}SingleLepOrFakes"{}}, [\&]() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \});}
\DoxyCodeLine{    cutflow.insert(\textcolor{stringliteral}{"{}DileptonPreselection"{}}, monolep\_or\_fakes, Left);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classCut}{Cut}}* dilep\_sign = \textcolor{keyword}{new} \mbox{\hyperlink{classCut}{Cut}}(}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}CheckDilepSign"{}},}
\DoxyCodeLine{        [\&]()}
\DoxyCodeLine{        \{}
\DoxyCodeLine{            \textcolor{keywordtype}{int} leading\_lep\_id = arbol.\mbox{\hyperlink{classArbol_a92be3f8c4258247d65e7f66a8da70453}{getLeaf}}<\textcolor{keywordtype}{int}>(\textcolor{stringliteral}{"{}leading\_lep\_id"{}});}
\DoxyCodeLine{            \textcolor{keywordtype}{int} trailing\_lep\_id = arbol.\mbox{\hyperlink{classArbol_a92be3f8c4258247d65e7f66a8da70453}{getLeaf}}<\textcolor{keywordtype}{int}>(\textcolor{stringliteral}{"{}trailing\_lep\_id"{}});}
\DoxyCodeLine{            \textcolor{keywordflow}{return} leading\_lep\_id*trailing\_lep\_id > 0;}
\DoxyCodeLine{        \}}
\DoxyCodeLine{    );}
\DoxyCodeLine{    cutflow.insert(\textcolor{stringliteral}{"{}DileptonPreselection"{}}, dilep\_sign, Right);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classCut}{Cut}}* SS\_presel = \textcolor{keyword}{new} \mbox{\hyperlink{classCut}{Cut}}(\textcolor{stringliteral}{"{}SSPreselection"{}}, [\&]() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \});}
\DoxyCodeLine{    cutflow.insert(\textcolor{stringliteral}{"{}CheckDilepSign"{}}, SS\_presel, Right);}
\DoxyCodeLine{}
\DoxyCodeLine{    \mbox{\hyperlink{classCut}{Cut}}* OS\_presel = \textcolor{keyword}{new} \mbox{\hyperlink{classCut}{Cut}}(}
\DoxyCodeLine{        \textcolor{stringliteral}{"{}OSPreselection"{}}, }
\DoxyCodeLine{        [\&]() }
\DoxyCodeLine{        \{ }
\DoxyCodeLine{            TH1F\& ld\_lep\_pt\_hist = cutflow.globals.getRef<TH1F>(\textcolor{stringliteral}{"{}ld\_lep\_pt\_hist"{}});}
\DoxyCodeLine{            TH1F\& tr\_lep\_pt\_hist = cutflow.globals.getRef<TH1F>(\textcolor{stringliteral}{"{}tr\_lep\_pt\_hist"{}});}
\DoxyCodeLine{            ld\_lep\_pt\_hist.Fill(arbol.\mbox{\hyperlink{classArbol_a92be3f8c4258247d65e7f66a8da70453}{getLeaf}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}leading\_lep\_pt"{}}));}
\DoxyCodeLine{            tr\_lep\_pt\_hist.Fill(arbol.\mbox{\hyperlink{classArbol_a92be3f8c4258247d65e7f66a8da70453}{getLeaf}}<\textcolor{keywordtype}{float}>(\textcolor{stringliteral}{"{}trailing\_lep\_pt"{}}));}
\DoxyCodeLine{            \textcolor{keywordflow}{return} \textcolor{keyword}{true}; }
\DoxyCodeLine{        \},}
\DoxyCodeLine{        [\&]()}
\DoxyCodeLine{        \{}
\DoxyCodeLine{            \textcolor{comment}{// Dummy weight}}
\DoxyCodeLine{            \textcolor{keywordflow}{return} 0.25;}
\DoxyCodeLine{        \}}
\DoxyCodeLine{    );}
\DoxyCodeLine{    cutflow.insert(\textcolor{stringliteral}{"{}CheckDilepSign"{}}, OS\_presel, Left);}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Run looper}}
\DoxyCodeLine{    tqdm bar; \textcolor{comment}{// progress bar}}
\DoxyCodeLine{    looper.\mbox{\hyperlink{classLooper_abfa564ca48778da1f58c8a6444ddd463}{run}}(}
\DoxyCodeLine{        [\&]() }
\DoxyCodeLine{        \{}
\DoxyCodeLine{            bar.progress(looper.\mbox{\hyperlink{classLooper_a97e473848469359cd33cd23771e0eb28}{n\_events\_processed}}, looper.\mbox{\hyperlink{classLooper_a666747cb782bd6082452a6d5ac18f94f}{n\_events\_to\_process}});}
\DoxyCodeLine{            \textcolor{comment}{// Reset tree}}
\DoxyCodeLine{            arbol.\mbox{\hyperlink{classArbol_a4c2184d378ab21a9627a57098291a7c4}{resetBranches}}();}
\DoxyCodeLine{            \textcolor{comment}{// Run cutflow}}
\DoxyCodeLine{            \textcolor{keywordtype}{bool} passed = cutflow.runUntil(\textcolor{stringliteral}{"{}OSPreselection"{}});}
\DoxyCodeLine{            \textcolor{keywordflow}{if} (passed) \{ arbol.\mbox{\hyperlink{classArbol_a1d029dd97a0451281c774b578d93bcda}{fillTTree}}(); \}}
\DoxyCodeLine{            \textcolor{keywordflow}{return};}
\DoxyCodeLine{        \}}
\DoxyCodeLine{    );}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Wrap up}}
\DoxyCodeLine{    bar.finish();}
\DoxyCodeLine{    cutflow.print();}
\DoxyCodeLine{    cutflow.writeCSV();}
\DoxyCodeLine{    arbol.\mbox{\hyperlink{classArbol_ade7d835bbe383a70006e86785ae5672c}{writeTFile}}();}
\DoxyCodeLine{    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\}}

\end{DoxyCode}

\end{DoxyEnumerate}

where {\ttfamily cutflow.\+print()} yields a visual representation of the cutflow object\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{Cutflow}
\DoxyCodeLine{└☑─Bookkeeping}
\DoxyCodeLine{    13564 (raw)}
\DoxyCodeLine{    13.564 (weighted)}
\DoxyCodeLine{    └☑─DileptonPreselection}
\DoxyCodeLine{        13564 (raw)}
\DoxyCodeLine{        13.564 (weighted)}
\DoxyCodeLine{        ├☒─SingleLepOrFakes}
\DoxyCodeLine{        │   4829 (raw)}
\DoxyCodeLine{        │   4.829 (weighted)}
\DoxyCodeLine{        └☑─CheckDilepSign}
\DoxyCodeLine{            8735 (raw)}
\DoxyCodeLine{            8.735 (weighted)}
\DoxyCodeLine{            ├☒─OSPreselection}
\DoxyCodeLine{            │   8628 (raw)}
\DoxyCodeLine{            │   2.157 (weighted)}
\DoxyCodeLine{            └☑─SSPreselection}
\DoxyCodeLine{                107 (raw)}
\DoxyCodeLine{                0.107 (weighted)}

\end{DoxyCode}
 